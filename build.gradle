buildscript
{
    repositories
    {
        jcenter()
    }
    dependencies
    {
        classpath 'com.android.tools.build:gradle:1.1.0'
    }
}

group = 'org.bubblecloud'

// Apply Java plugin for all non-Android sub-projects
configure(allprojects.findAll { project -> project.name.indexOf('android') == -1 })
{
    apply plugin: 'java'
}

// Apply Android plugin for specific Android sub-projects
switch(zigbee4javaProfile)
{
    case 'android':

    project(':zigbee-console-android')
    {
        apply plugin: 'com.android.application'
    }

    project(':zigbee-serial-android')
    {
        apply plugin: 'com.android.library'
    }
}

allprojects
{
    apply plugin: 'maven'

    group = 'org.bubblecloud.zigbee4java'
    version = '1.0.9-SNAPSHOT'

    repositories
    {
        mavenLocal()
        mavenCentral()
        maven { url "http://repository-bubblecloud.forge.cloudbees.com/release/" }
        maven { url "http://repo.maven.apache.org/maven2" }
    }

    plugins.withType(JavaPlugin).whenPluginAdded
    {
        // do Java specific configurations
    }

    dependencies
    {
        compile 'org.slf4j:slf4j-log4j12:1.7.5'
        compile 'log4j:log4j:1.2.17'
        testCompile 'junit:junit:4.11'
    }
}

project(':zigbee-api')
{
    dependencies
    {
        compile     group: 'com.google.collections', name: 'google-collections', version: '1.0'
        compile     group: 'org.bouncycastle',       name: 'bcprov-jdk15on',     version: '1.49'
        compile     group: 'org.bouncycastle',       name: 'bcmail-jdk15on',     version: '1.49'
        compile     group: 'commons-io',             name: 'commons-io',         version: '2.4'
        compile     group: 'commons-lang',           name: 'commons-lang',       version: '2.6'
        compile     group: 'commons-codec',          name: 'commons-codec',      version: '1.8'
        compile     group: 'org.codehaus.jackson',   name: 'jackson-mapper-asl', version: '1.9.2'
        testCompile group: 'org.easymock',           name: 'easymock',           version: '3.2'
    }
}

project(':zigbee-console-common')
{
    dependencies
    {
        compile project(':zigbee-api')
    }
}

println 'zigbee4java: Applying \'' + zigbee4javaProfile  +'\' build profile'
apply from: ("build-"+zigbee4javaProfile+".gradle")


